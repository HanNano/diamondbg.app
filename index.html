<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One2World Directory</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            padding: 20px 0;
        }
        
        .header h1 {
            font-size: 22px;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            opacity: 0.9;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .search-box {
            background: white;
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .search-btn {
            width: 100%;
            padding: 10px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 8px;
        }
        
        .add-host-btn {
            width: 100%;
            padding: 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .host-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            display: none;
        }
        
        .host-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .host-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
            border: 3px solid #667eea;
        }
        
        .host-info {
            flex: 1;
        }
        
        .host-name {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .host-bigo-id {
            color: #ff6b6b;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .social-links {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .social-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            text-decoration: none;
            color: white;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: transform 0.2s;
            cursor: pointer;
        }
        
        .social-btn:hover {
            transform: translateY(-1px);
        }
        
        .social-btn.facebook { background: #1877f2; }
        .social-btn.instagram { background: #e4405f; }
        .social-btn.tiktok { background: #000000; }
        .social-btn.telegram { background: #0088cc; }
        .social-btn.youtube { background: #ff0000; }
        
        .no-result {
            background: white;
            padding: 25px 15px;
            border-radius: 15px;
            text-align: center;
            color: #666;
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .sample-hosts {
            background: rgba(255,255,255,0.9);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .sample-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
            text-align: center;
            font-size: 13px;
        }
        
        .sample-list {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
        }
        
        .sample-bigo-id {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .sample-bigo-id:hover {
            background: #5a6fd8;
        }
        
        .add-host-form {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            display: none;
        }
        
        .form-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
            color: #333;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }
        
        .form-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .form-buttons {
            display: flex;
            gap: 10px;
        }
        
        .submit-btn {
            flex: 1;
            padding: 10px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .cancel-btn {
            flex: 1;
            padding: 10px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
        }
        
        .loading {
            text-align: center;
            padding: 10px;
            color: white;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>One2World Directory</h1>
            <p>BIGO ID, Facebook, Instagram, TikTok ·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ·ÄÅ·ÄØ·ÄÄ·Ä≠·ÄØ ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Äº·ÄÆ·Ä∏ ·Äõ·Äæ·Ä¨·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äö·ÄØ·Ä∂·Äî·Ä≤·Ä∑ ·Äû·ÄÑ·Ä∑·Ä∫·Äõ·Ä≤·Ä∑ Celi ·Äê·ÄÖ·Ä∫·Äö·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ·Äï·Äº·Äî·Ä∫·Äê·ÄΩ·Ä±·Ä∑·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äï·Äº·ÄÆ</p>
        </div>
        
        <div class="sample-hosts">
            <div class="sample-title">üí° ·Äî·Äô·Ä∞·Äî·Ä¨ ID ·Äô·Äª·Ä¨·Ä∏ - ·Äî·Äæ·Ä≠·Äï·Ä∫·Äï·Äº·ÄÆ·Ä∏·Äõ·Äæ·Ä¨·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´:</div>
            <div class="sample-list">
                <div class="sample-bigo-id" onclick="searchSample('sweet_mm_22')">sweet_mm_22</div>
                <div class="sample-bigo-id" onclick="searchSample('game_king')">game_king</div>
                <div class="sample-bigo-id" onclick="searchSample('dance_queen')">dance_queen</div>
                <div class="sample-bigo-id" onclick="searchSample('star_live_88')">star_live_88</div>
                <div class="sample-bigo-id" onclick="searchSample('myanmar_singer')">myanmar_singer</div>
            </div>
        </div>
        
        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" 
                   placeholder="BIGO ID, Facebook, Instagram, TikTok ·ÄÄ·Ä≠·ÄØ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´...">
            <button class="search-btn" onclick="searchHost()">
                üîç ·Äõ·Äæ·Ä¨·Äô·Äö·Ä∫
            </button>
            <button class="add-host-btn" onclick="showAddHostForm()">
                ‚ûï ·Ä°·Äû·ÄÖ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äô·Äö·Ä∫
            </button>
        </div>
        
        <div class="add-host-form" id="addHostForm">
            <div class="form-title">·Ä°·Äû·ÄÖ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äõ·Äî·Ä∫</div>
            <div class="form-group">
                <label class="form-label" for="newHostName">Name</label>
                <input type="text" class="form-input" id="newHostName" placeholder="Your Name">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostBigoId">BIGO ID</label>
                <input type="text" class="form-input" id="newHostBigoId" placeholder="123456">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostFacebook">Facebook</label>
                <input type="text" class="form-input" id="newHostFacebook" placeholder="Facebook Username">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostInstagram">Instagram</label>
                <input type="text" class="form-input" id="newHostInstagram" placeholder="Instagram username">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostTiktok">TikTok</label>
                <input type="text" class="form-input" id="newHostTiktok" placeholder="TikTok username">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostTelegram">Telegram</label>
                <input type="text" class="form-input" id="newHostTelegram" placeholder="Telegram username">
            </div>
            <div class="form-group">
                <label class="form-label" for="newHostYoutube">YouTube</label>
                <input type="text" class="form-input" id="newHostYoutube" placeholder="YouTube channel">
            </div>
            <div class="form-buttons">
                <button class="cancel-btn" onclick="hideAddHostForm()">·Äô·Äë·Ää·Ä∑·Ä∫·Äê·Ä±·Ä¨·Ä∑·Äï·Ä´</button>
                <button class="submit-btn" onclick="submitNewHost()">·Ä°·Äê·Ää·Ä∫·Äï·Äº·ÄØ·Äï·Äº·ÄÆ·Ä∏·Äï·Ä≠·ÄØ·Ä∑·Äô·Äö·Ä∫</button>
            </div>
        </div>
        
        <div class="host-card" id="hostResult">
            <div class="host-header">
                <img src="" alt="Profile" class="host-avatar" id="hostAvatar">
                <div class="host-info">
                    <div class="host-name" id="hostName">Host Name</div>
                    <div class="host-bigo-id">üÜî BIGO ID: <span id="hostBigoId">bigo_id</span></div>
                </div>
            </div>
            
            <!-- Social buttons will be added here by JavaScript -->
            <div class="social-links" id="socialLinks">
            </div>
        </div>
        
        <div class="no-result" id="noResult">
            <div style="font-size: 40px; margin-bottom: 8px;">üòî</div>
            <strong>·Äõ·Äæ·Ä¨·Äú·Ä≠·ÄØ·Ä∑·Äô·Äê·ÄΩ·Ä±·Ä∑·Äï·Ä´</strong><br>
            <span style="font-size: 12px;">·Äî·Äô·Ä∞·Äî·Ä¨ ID ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ·ÄÖ·Äô·Ä∫·Ä∏·Äõ·Äæ·Ä¨·ÄÄ·Äº·Ää·Ä∑·Ä∫·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´</span>
            <div style="margin-top: 10px;">
                <button class="add-host-btn" onclick="showAddHostForm()" style="font-size: 12px; padding: 6px 12px;">
                    ‚ûï ·Äí·ÄÆ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·ÄÄ·Ä≠·ÄØ ·Ä°·Äû·ÄÖ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äô·Äö·Ä∫
                </button>
            </div>
        </div>
        
        <div class="loading" id="loading">
            üîÑ ·Äõ·Äæ·Ä¨·Äñ·ÄΩ·Ä±·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫...
        </div>
    </div>

    <script>
        // Google Apps Script URL - ·Äû·ÄÑ·Ä∑·Ä∫·Äõ·Ä≤·Ä∑ Google Apps Script URL ·ÄÄ·Ä≠·ÄØ ·Äí·ÄÆ·Äî·Ä±·Äõ·Ä¨·Äô·Äæ·Ä¨ ·Äë·Ää·Ä∑·Ä∫·Äï·Ä´
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwF0KjBb7jGMrjCapUa1VRCS-LHAzvVBs5a4eA9R4imTG2t9S-qxMIKon5ZrQQRqoDb/exec';
        
        // Telegram Web App initialization
        let tg = window.Telegram.WebApp;
        
        // Global hosts data - initially empty, will be loaded from Google Sheets
        let hosts = {};
        
        // Sample data for testing (Google Sheets ·Äô·ÄÅ·Äª·Ä≠·Äê·Ä∫·ÄÅ·ÄÑ·Ä∫ ·ÄÖ·Äô·Ä∫·Ä∏·Äû·Äï·Ä∫·Äñ·Ä≠·ÄØ·Ä∑)
        const sampleHosts = {
            'sweet_mm_22': {
                name: 'Hla Hla',
                bigoId: 'sweet_mm_22',
                facebook: 'sweet.hlahla',
                instagram: 'sweet_hla',
                tiktok: 'sweet_singer',
                telegram: 'hlahla',
                youtube: 'hlahla_music',
                avatar: 'https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face'
            },
            'game_king': {
                name: 'Min Ko',
                bigoId: 'game_king',
                facebook: 'minko.gamer',
                instagram: 'minko_games',
                tiktok: 'none',
                telegram: 'minko',
                youtube: 'minko_gaming',
                avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face'
            }
        };

        // ==================== SOCIAL BUTTONS CREATION FUNCTIONS ====================

        // Social buttons ·Äê·ÄΩ·Ä±·ÄÄ·Ä≠·ÄØ dynamic ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·Äï·Ä±·Ä∏·Äê·Ä≤·Ä∑ function
        function createSocialButtons(host) {
            const socialLinks = document.getElementById('socialLinks');
            socialLinks.innerHTML = ''; // ·Äõ·Äæ·Ä≠·Äï·Äº·ÄÆ·Ä∏·Äû·Ä¨·Ä∏ content ·Äê·ÄΩ·Ä±·ÄÄ·Ä≠·ÄØ ·Äõ·Äæ·ÄÑ·Ä∫·Ä∏·Äú·ÄÑ·Ä∫·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            
            console.log('Creating social buttons for:', host);
            
            // Facebook button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (host.facebook && host.facebook !== 'none') {
                createSocialButton('facebook', 'https://facebook.com/' + host.facebook, 'üìò Facebook', socialLinks);
            }
            
            // Instagram button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (host.instagram && host.instagram !== 'none') {
                createSocialButton('instagram', 'https://instagram.com/' + host.instagram, 'üì∑ Instagram', socialLinks);
            }
            
            // TikTok button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (host.tiktok && host.tiktok !== 'none') {
                createSocialButton('tiktok', 'https://tiktok.com/@' + host.tiktok, 'üéµ TikTok', socialLinks);
            }
            
            // Telegram button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (host.telegram && host.telegram !== 'none') {
                createSocialButton('telegram', 'https://t.me/' + host.telegram, '‚úàÔ∏è Telegram', socialLinks);
            }
            
            // YouTube button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (host.youtube && host.youtube !== 'none') {
                createSocialButton('youtube', 'https://youtube.com/' + host.youtube, 'üì∫ YouTube', socialLinks);
            }
            
            // Social buttons ·Äô·Äõ·Äæ·Ä≠·Äõ·ÄÑ·Ä∫ message ·Äï·Äº·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
            if (socialLinks.children.length === 0) {
                const noSocialMsg = document.createElement('div');
                noSocialMsg.textContent = 'Social media accounts ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´';
                noSocialMsg.style.color = '#666';
                noSocialMsg.style.fontSize = '12px';
                noSocialMsg.style.textAlign = 'center';
                noSocialMsg.style.padding = '10px';
                socialLinks.appendChild(noSocialMsg);
            }
        }

        // Individual social button ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·Äï·Ä±·Ä∏·Äê·Ä≤·Ä∑ helper function
        function createSocialButton(platform, url, text, container) {
            const button = document.createElement('a');
            button.className = `social-btn ${platform}`;
            button.href = url;
            button.target = '_blank';
            button.innerHTML = text;
            button.onclick = function() {
                // Telegram Web App ·Äõ·Äæ·Ä≠·Äõ·ÄÑ·Ä∫ haptic feedback ·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
                if (typeof tg !== 'undefined') {
                    tg.HapticFeedback.impactOccurred('light');
                }
                
                // Analytics ·Ä°·Äê·ÄΩ·ÄÄ·Ä∫ log ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
                console.log(`Social button clicked: ${platform} - ${url}`);
            };
            container.appendChild(button);
        }

        // ==================== MAIN APPLICATION FUNCTIONS ====================

        function initTelegram() {
            if (typeof tg !== 'undefined') {
                tg.expand();
                tg.ready();
                
                if (tg.colorScheme === 'dark') {
                    document.body.style.background = 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)';
                }
            }
            
            // Load initial data from Google Sheets
            loadHostsFromGoogleSheets();
        }

        // Load hosts data from Google Sheets
        async function loadHostsFromGoogleSheets() {
            try {
                document.getElementById('loading').style.display = 'block';
                
                const response = await fetch(SCRIPT_URL + '?action=getData');
                const result = await response.json();
                
                if (result.status === 'success') {
                    // Convert array data to object format
                    hosts = {};
                    result.data.forEach(item => {
                        if (item.BIGO_ID) {
                            hosts[item.BIGO_ID] = {
                                name: item.Name || '',
                                bigoId: item.BIGO_ID,
                                facebook: item.Facebook || 'none',
                                instagram: item.Instagram || 'none',
                                tiktok: item.TikTok || 'none',
                                telegram: item.Telegram || 'none',
                                youtube: item.YouTube || 'none',
                                avatar: item.Avatar || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop&crop=face'
                            };
                        }
                    });
                    
                    console.log('Loaded hosts from Google Sheets:', hosts);
                } else {
                    console.error('Error loading data from Google Sheets:', result.data);
                    // Fallback to sample data
                    hosts = sampleHosts;
                }
            } catch (error) {
                console.error('Network error loading data:', error);
                // Fallback to sample data
                hosts = sampleHosts;
            } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        // Search sample hosts
        function searchSample(bigoId) {
            document.getElementById('searchInput').value = bigoId;
            searchHost();
        }

        // Enhanced search function
        function searchHost() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            const hostResult = document.getElementById('hostResult');
            const noResult = document.getElementById('noResult');
            
            // Hide both first
            hostResult.style.display = 'none';
            noResult.style.display = 'none';
            hideAddHostForm();
            
            if (!searchTerm) {
                noResult.style.display = 'block';
                noResult.innerHTML = '<div style="font-size: 40px; margin-bottom: 8px;">üîç</div><strong>ID ·Äë·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´</strong><br><span style="font-size: 12px;">·Äî·Äô·Ä∞·Äî·Ä¨ ID ·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ·Äî·Äæ·Ä≠·Äï·Ä∫·Äï·Äº·ÄÆ·Ä∏ ·ÄÖ·Äô·Ä∫·Ä∏·ÄÄ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´</span>';
                return;
            }
            
            // Enhanced search - checks ALL fields
            let foundHost = null;
            let hostId = '';
            
            // Remove @ symbol if present for searching
            const cleanSearchTerm = searchTerm.replace('@', '');
            
            for (const [id, host] of Object.entries(hosts)) {
                // Search in BIGO ID
                if (id.toLowerCase().includes(cleanSearchTerm)) {
                    foundHost = host;
                    hostId = id;
                    break;
                }
                // Search in name
                if (host.name.toLowerCase().includes(cleanSearchTerm)) {
                    foundHost = host;
                    hostId = id;
                    break;
                }
                // Search in Facebook
                if (host.facebook !== 'none' && host.facebook.toLowerCase().includes(cleanSearchTerm)) {
                    foundHost = host;
                    hostId = id;
                    break;
                }
                // Search in Instagram (remove @ for search)
                if (host.instagram !== 'none' && host.instagram.toLowerCase().includes(cleanSearchTerm)) {
                    foundHost = host;
                    hostId = id;
                    break;
                }
                // Search in TikTok (remove @ for search)
                if (host.tiktok !== 'none' && host.tiktok.toLowerCase().includes(cleanSearchTerm)) {
                    foundHost = host;
                    hostId = id;
                    break;
                }
            }
            
            if (foundHost) {
                // Update host info with profile picture
                document.getElementById('hostName').textContent = foundHost.name;
                document.getElementById('hostBigoId').textContent = foundHost.bigoId;
                document.getElementById('hostAvatar').src = foundHost.avatar;
                
                // Social buttons ·Äê·ÄΩ·Ä± ·Äñ·Äî·Ä∫·Äê·ÄÆ·Ä∏·Äï·Ä±·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏
                createSocialButtons(foundHost);
                
                hostResult.style.display = 'block';
                
                // Send to Telegram if available
                if (typeof tg !== 'undefined') {
                    tg.HapticFeedback.impactOccurred('soft');
                }
            } else {
                noResult.style.display = 'block';
            }
        }

        function showAddHostForm() {
            document.getElementById('addHostForm').style.display = 'block';
            document.getElementById('hostResult').style.display = 'none';
            document.getElementById('noResult').style.display = 'none';
        }
        
        function hideAddHostForm() {
            document.getElementById('addHostForm').style.display = 'none';
            // Clear form fields
            document.getElementById('newHostName').value = '';
            document.getElementById('newHostBigoId').value = '';
            document.getElementById('newHostFacebook').value = '';
            document.getElementById('newHostInstagram').value = '';
            document.getElementById('newHostTiktok').value = '';
            document.getElementById('newHostTelegram').value = '';
            document.getElementById('newHostYoutube').value = '';
        }
        
        // Submit new host to Google Sheets
        async function submitNewHost() {
            const name = document.getElementById('newHostName').value.trim();
            const bigoId = document.getElementById('newHostBigoId').value.trim();
            const facebook = document.getElementById('newHostFacebook').value.trim();
            const instagram = document.getElementById('newHostInstagram').value.trim();
            const tiktok = document.getElementById('newHostTiktok').value.trim();
            const telegram = document.getElementById('newHostTelegram').value.trim();
            const youtube = document.getElementById('newHostYoutube').value.trim();
    
        if (!name || !bigoId) {
        alert('·ÄÄ·Äª·Ä±·Ä∏·Äá·Ä∞·Ä∏·Äï·Äº·ÄØ·Åç ·Ä°·Äô·Ää·Ä∫·Äî·Äæ·ÄÑ·Ä∑·Ä∫ BIGO ID ·ÄÄ·Ä≠·ÄØ·Äñ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´');
        return;
        }
    
        try {
        document.getElementById('loading').style.display = 'block';
        document.getElementById('loading').textContent = 'üîÑ ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫...';
        
        // Prepare data for sending
        const formData = {
            action: 'addData',
            name: name,
            bigo_id: bigoId,
            facebook: facebook || 'none',
            instagram: instagram || 'none', 
            tiktok: tiktok || 'none',
            telegram: telegram || 'none',
            youtube: youtube || 'none'
        };
        
        console.log('Sending data:', formData);
        
        const params = new URLSearchParams(formData);
        
        const response = await fetch(SCRIPT_URL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: params
        });     
        
        const result = await response.json();
        console.log('Server response:', result);
        
        if (result.status === 'success') {
            // Success message
            alert('‚úÖ ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫·Äô·Äº·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫! ·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏ ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ·Åã\n\n·Ä°·Äô·Ää·Ä∫: ' + name + '\nBIGO ID: ' + bigoId);
                
            // Add to local hosts object for immediate use
            hosts[bigoId] = {
                name: name,
                bigoId: bigoId,
                facebook: facebook || 'none',
                instagram: instagram || 'none',
                tiktok: tiktok || 'none',
                telegram: telegram || 'none',
                youtube: youtube || 'none',
                avatar: 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop&crop=face'
            };
                                    
            hideAddHostForm();

            // Auto-search for the newly added host
            document.getElementById('searchInput').value = bigoId;
            setTimeout(() => searchHost(), 500);
        } else {
            throw new Error(result.data || 'Unknown error');
        }
    } catch (error) {
        console.error('Error adding host:', error);
        

            
    } finally {
                document.getElementById('loading').style.display = 'none';
            }
        }

        // Enter key support
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchHost();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initTelegram();
        });
    </script>
</body>
</html>
